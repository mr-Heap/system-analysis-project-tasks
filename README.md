# Проект по системному анализу

# Задания
### 1 - Техническое задание
В папке `1 - Terms of Reference` создан соответсвующий файл
### 2 - Дизайн
Папка отсутствует, [Figma-макет по ссылке](https://www.figma.com/design/ZlXxQAkvW5yvLhRnUvDQjP/Pusk-App?node-id=0-1&t=Q95YtE3CqvBs5aJu-1)
### 3 - Схема БД
В папке `3 - Database scheme` приведен файл ddl.sql, описывающий все отношения и связи между ними. 
Также приведен рисунок схемы (для наглядности в белом и черном цвете)
### 4 - Диаграммы последовательности и BPMN
В папке `4 - Diagrams` приведена BPMN-диаграмма в файле BPMN.svg, а также диаграмма последовательности,
которая разбита на две диаграммы: взаимодействие с плеером и создание объекта пользователя
### 5 - Реализация проекта
Папка `5 - Project` является сабмодулем ([репозиторий](https://github.com/mr-Heap/system-analysis-project)).
На этом этапе можно склонировать репозиторий и в корне проекта запустить `docker compose up --build`.
Запустятся 5 контейнеров - backend, postgres, grafana, prometheus и alert manager.
### 6 - Деплой
Деплой был произведен при помощи Gitlab, соответсвующий проекту файл .gitlab-ci приведен в 
папке `6 - Deploy`
### 8 - Автотесты
В папке `8 - QA` приведены экспортированные из Postman автотесты и реализован скрипт, запускающий их при помощи newman,
а также формирующий отчет в папку newman-reports. В папке уже есть пример отчета.
Скрипт autotests.sh устанавливает newman при помощи ноды, а также запускает тесты. Обращение к API
происходит по localhost:8080 (должен быть запущен docker-контейнер, см. шаг 5)
Также с исходниками автотестов можно ознакомится по [пригласительной ссылке](https://app.getpostman.com/join-team?invite_code=2d6e3640a6c1e294808f2edda5ed6bac997846b8512350cd34969cb286886597) в Postman-проект

### 10 - Метрики и алерты
При запуске контейнеров поднимается prometheus, grafana и alert manager.
В графане сразу формируются дашборды (папка проекта - monitoring) - backend и JVM дашбоард.
Alert manager реализован через телеграм. При упавшем бэкенде или 500ке, по модулю блокировки телеграмма, 
будет прислан алерт в группу в телеграмме. Для тестирования добавьтесь в мою группу [MrHeap Project Alerts](https://t.me/+tiapyuEBs6UxYWUy).
В ней есть я и бот, который будет слать алерты. Можно попробовать остановить контейнер, через некоторое время прилетит алерт.
Также можно вызвать специальное API `curl --location 'localhost:8080/api/v1/fail/internal-error'`, которое всегда отдает 500 ошибку.
Если не хотите добавляться, в папке `10 - Metrics and Alerts` есть примеры алертов и метрик.


